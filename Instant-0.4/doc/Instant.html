<html><head><title>The Instant C/C++ in Python</title><style>
pre {color:  #000000;
      background-color:  #b0c8d0;   
      position: relative; 
      left: 40px; margin-right: 80px;
      border-style: solid; border-color: black; 
      border-width: thin}
</style></head>

<body bgcolor="#ffffff" link="#0d271a" vlink="#8b0a50">

<table width="600" cellpadding="0" cellspacing="0">
<tbody><tr>
   <td valign="top" bgcolor="#b0c8d0">
       <table width="180" valign="top">
           <tbody><tr>
               <td>
<table width="100%">
<tbody><tr>

<tr><td bgcolor="#000000"><font color="#ffffff"><b>Local</b></font></td></tr>
<tr><td><a href="code/index.html">Documentation</a></td></tr>
<tr><td><a href="http://sourceforge.net/projects/pyinstant">Download</a></td></tr>
<tr><td></td></tr>
<tr><td></td></tr>



<tr><td bgcolor="#000000"><font color="#ffffff"><b>Global</b></font></td></tr>
<tr><td><a href="http://www.python.org/">Python</a></td></tr>
<tr><td><a href="http://www.swig.org/">SWIG</a></td></tr>
<tr><td><a href="http://www.simula.no/">Simula Research Laboratory</a></td></tr>
<tr><td></td></tr>
<tr><td></td></tr>



 </tbody></table>
 </td>
 </tr>
 </tbody></table>
 </td>
<td valign="top">
<table width="600" valign="top">
<tbody><tr>
<td>
<p>
</p><h1>Instant inlining of C/C++ code in Python</h1>

<h2>News</h2>
<b>Release 0.4:</b> Added md5sums to avoid unnecessary compilation. <br>  
<b>Release 0.3:</b> Instant supports NumPy arrays. <br>

 
<h2>Appetizer </h2>
Instant is a Python module that allows for instant inlining of C and
C++ code in Python. It is a small Python module built on top of SWIG.   
<p>
Example of use: 
<pre>
&gt;&gt;&gt; c_code = &quot;&quot;&quot;
double sum(double a, double b){ 
   return a+b; 
}
&quot;&quot;&quot;
&gt;&gt;&gt; import Instant  
&gt;&gt;&gt; ext = Instant.Instant()
&gt;&gt;&gt; 
&gt;&gt;&gt; # create the wrapper code, compile and link it to a shared library 
&gt;&gt;&gt; ext.create_extension(code=c_code, module='test1_ext')
&gt;&gt;&gt; 
&gt;&gt;&gt; # use the C code  
&gt;&gt;&gt; from test1_ext import sum  
&gt;&gt;&gt; print sum(3.7, 4.8) 
8.5
</pre>

Example with NumPy arrays converted to C double arrays:
<pre>
&gt;&gt;&gt; import Instant  
&gt;&gt;&gt; import Numeric
&gt;&gt;&gt; import sys
&gt;&gt;&gt; import time
&gt;&gt;&gt;
&gt;&gt;&gt; ext = Instant.Instant()
&gt;&gt;&gt;
&gt;&gt;&gt; c_code = &quot;&quot;&quot;
/* add function for vectors with all safety checks removed ..*/ 
void add(int n1, double* array1, int n2, double* array2, int n3, double* array3){
  for (int i=0; i&lt;n1; i++) {  
     array3[i] = array1[i] + array2[i]; 
  }
}
&gt;&gt;&gt;&quot;&quot;&quot;
&gt;&gt;&gt;
&gt;&gt;&gt; ext.create_extension(code=c_code, headers=[&quot;arrayobject.h&quot;], 
&gt;&gt;&gt;          include_dirs=[sys.prefix + &quot;/include/python&quot;  + sys.version[:3] + &quot;/Numeric&quot;],
&gt;&gt;&gt;          init_code='import_array();', module='test3_ext', 
&gt;&gt;&gt;          arrays = [['n1', 'array1'],['n2', 'array2'],['n3', 'array3']])
&gt;&gt;&gt;
&gt;&gt;&gt; from test3_ext import add 
&gt;&gt;&gt; a = Numeric.arange(10000); a = Numeric.sin(a)
&gt;&gt;&gt; b = Numeric.arange(10000); b = Numeric.cos(b)
&gt;&gt;&gt; c = Numeric.arange(10000); c = Numeric.cos(c)
&gt;&gt;&gt;
&gt;&gt;&gt;add(a,b,c)
</pre>
On my machine, the above example is almost twice as fast as 
using the add operator implemented in NumPy. This comparison
is of course not fair, since there are no safety checks in the 
above example. The comparison is implemented in the file test3.py 
that comes with the Instant package. 




<p>

<h2>Requirement</h2>
Instant requires Python and SWIG. It has only been tested with 
Python 2.3 and 2.4 and SWIG 1.3.24. It only runs on Unix systems.      

<h2>Related Projects</h2>
The <a href="http://www.scipy.org/documentation/weave">weave</a> module
in <a href="http://www.scipy.org">SciPy</a>


</p><hr>
<address><a href="mailto:magnew@ifi.uio.no">Magne Westlie</a></address>
<address><a href="mailto:kent-and@simula.no">Kent-Andre Mardal</a></address>
<!-- Created: Mon Mar 22 14:34:45 GMT 2004 -->
<!-- hhmts start -->
Last modified: Mon Oct 10 12:14:16 GMT 2005
<!-- hhmts end -->
 
             </td>
          </tr>
       </tbody></table>
   </td>
</tr>
</tbody></table>
 


</body></html>
